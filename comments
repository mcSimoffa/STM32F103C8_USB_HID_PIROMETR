Отладочная информация онлайн льется в буфер, выделяемый динамически, поэтому HEAP должен быть не менее 8Кб
Иначе ITM_SendChar не успевает его вычитывать и он переполняется
Вообще ITM_SendChar и отладка SWO крайне нестабильная вещь, не годится для больших объемов вывода, завешивает IAR, ST-Link и J-link